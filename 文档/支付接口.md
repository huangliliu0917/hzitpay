# 统一下单-支付接口

> 接口描述

​	业务通过统一下单接口可以发起任意三方支付渠道的支付订单。业务系统不必关心该如何调用三方支付，统一下单接口会根据业务系统选择的支付渠道ID，选择对应支付渠道的支付产品，发起下单请求，然后响应给业务系统支付请求所需参数。



> 业务流程

![](C:\Users\Administrator\Desktop\项目\imge\统一下单.png)

> 接口地址

测试URL地址：http://127.0.0.1:8080/api/pay/create_order



> 请求参数

| 字段名          | 变量名     | 必填 | 类型        | 示例值                           | 描述                     |
| --------------- | ---------- | ---- | ----------- | -------------------------------- | ------------------------ |
| 商户ID          | mchId      | 是   | String(30)  | 20001222                         | 支付中心分配的商户号     |
| 商户订单号      | mchOrderNo | 是   | String(30)  | 20160427210604000490             | 商户生成的订单号         |
| 渠道ID          | channelId  | 是   | String(24)  | WX_JSAPI                         | 见支付渠道参数           |
| 币种            | currency   | 是   | String(3)   | cny                              | 三位货币代码,人民币:cny  |
| 支付金额        | amount     | 是   | int         | 100                              | 支付金额,单位分          |
| 客户端IP        | clientIp   | 否   | String(32)  | 210.73.10.148                    | 客户端IP地址             |
| 设备            | device     | 否   | String(64)  | ios10.3.1                        | 客户端设备               |
| 支付结果回调URL | notifyUrl  | 是   | String(200) | http://127.0.0.1:8080/notify.htm | 支付结果回调URL          |
| 商品主题        | subject    | 是   | String(64)  | xxpay测试商品1                   | 商品主题                 |
| 商品描述信息    | body       | 是   | String(256) | xxpay测试商品描述                | 商品描述信息             |
| 扩展参数1       | param1     | 否   | String(64)  |                                  | 支付中心回调时会原样返回 |
| 扩展参数2       | param2     | 否   | String(64)  |                                  | 支付中心回调时会原样返回 |
| 签名            | sign       | 是   | String(32)  | C380BEC2BFD727A4B6845133519F3AD6 | 签名值，详见签名算法     |
|                 |            |      |             |                                  |                          |





返回结果

| 字段名     | 变量名  | 必填 | 类型        | 示例值   | 描述                                                         |
| ---------- | ------- | ---- | ----------- | -------- | ------------------------------------------------------------ |
| 返回状态码 | retCode | 是   | String(16)  | SUCCESS  | SUCCESS/FAIL此字段是通信标识，非交易标识，交易是否成功需要查看resCode来判断 |
| 返回信息   | retMsg  | 否   | String(128) | 签名失败 | 返回信息，如非空，为错误原因 签名失败 参数格式校验错误       |



##### 以下字段在retCode为SUCCESS的时候有返回

| 字段名       | 变量名     | 必填 | 类型        | 示例值      | 描述         |
| ------------ | ---------- | ---- | ----------- | ----------- | ------------ |
| 业务结果     | resCode    | 是   | String(16)  | SUCCESS     | SUCCESS/FAIL |
| 错误代码     | errCode    | 否   | String(32)  | SYSTEMERROR | 错误码       |
| 错误代码描述 | errCodeDes | 否   | String(128) | 系统错误    | 结果信息描述 |



##### 以下字段在retCode和resCode都为SUCCESS的时候有返回

| 字段名             | 变量名     | 必填 | 类型        | 示例值                                                       | 描述                                      |
| ------------------ | ---------- | ---- | ----------- | ------------------------------------------------------------ | ----------------------------------------- |
| 支付订单号         | payOrderId | 是   | String(32)  | 20160427210604000490                                         | 支付中心生成的订单号                      |
| 预支付标识         | prepayId   | 否   | String(64)  | wx201410272009395522657a690389285100                         | 第三方支付公司返回的预支付标识            |
| 跳转第三方支付URl  | payUrl     | 否   | String(200) | http://url                                                   | 支付中心生生成跳转第三方支付页面的URL地址 |
| 跳转第三方支付方法 | payAction  | 否   | String(20)  | POST                                                         | 跳转第三方支付页面要求的方法              |
| 跳转第三方支付参数 | payParams  | 否   | String(500) | 该字段不参与签名,当payAction=POST时,该参数有值,JSON格式数据,跳转第三方支付页面需要传递的参数 |                                           |
| 签名               | sign       | 是   | String(32)  | C380BEC2BFD727A4B6845133519F3AD6                             | 签名值，详见签名算法                      |